{% extends "base.html" %}
{% load static %}
{% load humanize %}
{% block title %}
    | Welcome
{% endblock title %}
{% block content %}
    <!-- Showcase -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <section id="showcase">
        <div class="container text-center">
            <div class="home-search p-5">
                <div class="overlay p-5">
                    <h1 class="display-4 mb-4">Searching for jobs</h1>
                    <p class="lead">freelancego website can help you work from home</p>
                    <div class="search">
                        {% comment %} url need change {% endcomment %}
                        <form action="{% url "listings:search" %}" method = "GET">
                            <!-- Form Row 1 -->
                            <div class="form-row">
                                <div class="col-md-12 mb-3">
                                    <label class="sr-only">jobs</label>
                                    <input type="text"
                                           name="keywords"
                                           class="form-control"
                                           placeholder="Keyword (Job Title, Company, Job Description, Requirement)" />
                                </div>
                            </div>
                            <!-- Form Row 2 -->
                            <div class="form-row">
                                <div class="col-md-4 mb-3">
                                    <label class="sr-only">Industry</label>
                                    <select name="industry" class="form-control">
                                        <option value="" {% if not values.industry %}selected="true"{% endif %}>Industry (All)</option>
                                        {% for key, value in industry_choices.items %}
                                            <option value="{{ key }}"
                                                    {% if values.industry == key %}selected="true"{% endif %}>
                                                {{ value }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label class="sr-only">Budget</label>
                                    <select name="budget" class="form-control">
                                        <option value="" {% if not values.budget %}selected="true"{% endif %}>Budget (All)</option>
                                        {% for key, value in budget_choices.items %}
                                            <option value="{{ key }}"
                                                    {% if values.budget == key %}selected="true"{% endif %}>
                                                {{ value }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <select name="duration" class="form-control" id="type">
                                        <option value="" {% if not values.duration %}selected="true"{% endif %}>Duration (All)</option>
                                        {% for key, value in duration_choices.items %}
                                            <option value="{{ key }}"
                                                    {% if values.duration == key %}selected="true"{% endif %}>
                                                {{ value }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <button class="btn btn-info btn-block mt-4" type="submit">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Listings -->
    <section id="listings" class="py-5">
        <div class="container">
            <h3 class="text-center mb-3">Latest Job Posts</h3>
            <div class="row">
                {% if listings %}
                    <!-- Listing 1 -->
                    {% for listing in listings %}
                        <div class="col-md-6 col-lg-4 mb-4">
                            <div class="card listing-preview">
                                <img class="card-img-top" src= "{{ listing.company.logo }}" alt= "" />
                                <div class="card-img-overlay"></div>
                                <div class="card-body">
                                    <div class="listing-heading text-center">
                                        <h4 class="text-primary">{{ listing.title | title }}</h4>
                                    </div>
                                    <hr />
                                    <div class="row py-2"style="color: #124a81;">
                                        <div class="col-12">
                                            <i class="fa-regular fa-money-bill-1"></i>  Budget: {{ listing.budget }}
                                        </div>
                                    </div>
                                    <div class="row py-2"style="color: #124a81;">
                                        <div class="col-12">
                                            <i class="fa-solid fa-calendar-days"></i> Duration:  {{ listing.duration }}
                                        </div>
                                    </div>
                                    <div class="row py-2"style="color: #124a81;">
                                        <div class="col-12">
                                            <i class="fa-solid fa-briefcase"></i> Industry: {{ listing.industry }}
                                        </div>
                                    </div>
                                    <hr />
                                    <div class="row py-2"style="color: #124a81;">
                                        <div class="col-12">
                                            <i class="fa-solid fa-building"></i> Company: <a href="{% url 'companies:company' listing.company.id %}">{{ listing.company }}</a>
                                        </div>
                                    </div>
                                    <div class="row text-secondary pb-2">
                                        <div class="col-12">
                                            <i class="fas fa-clock"></i> Post on {{ listing.publish_date }}
                                        </div>
                                    </div>
                                    <hr />
                                    <a href="{% url "listings:listing" listing.id %}"
                                       class="btn btn-primary btn-block">More Info</a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class='col-md-12'>
                        <h2>No Job Available</h2>
                    </div>
                {% endif %}
                <div class="container mt-4">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card text-white" style="border:none">
                                <img src="{% static "img/freelancer.png" %}"
                                     alt=""
                                     class="rounded-img"
                                     style="border-radius:20px;
                                            width:100%;
                                            height:auto">
                                <div class="card-img-overlay">
                                    <h4 class="card-title">Freelancer</h4>
                                    <p class="card-text">Explore new sources of employment</p>
                                    <h6 class="card-subtitle text-muted">
                                        You can connect with more job opportunities on Freelancergo and have the chance to collaborate with major well-known organizations.
                                    </h6>
                                    <br />
                                    <a href="{% url 'accounts:register' %}?account_type=individual"
                                       class="btn btn-outline-info">Join in as freelancer</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card text-white" style="border:none">
                                <img src="{% static "img/HR.png" %}"
                                     alt=""
                                     class="rounded-img"
                                     style="border-radius:20px;
                                            width:100%;
                                            height:auto">
                                <div class="card-img-overlay">
                                    <h4 class="card-title">HR</h4>
                                    <p class="card-text">Let our experts solve your problem</p>
                                    <h6 class="card-subtitle text-muted">
                                        Posting jobs directly to get a experts as quickly as possible. And you're sure to find a freelancer you like!
                                    </h6>
                                    <br />
                                    <a href="{% url 'accounts:register' %}?account_type=hr"
                                       class="btn btn-outline-info">Join in as HR</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
