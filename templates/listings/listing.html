{% extends "base.html" %}
{% load static %}
<!--load humanize -->
{% load humanize %}
{% block title %} | {{listing.title}}{% endblock title %}
<!-- About main content -->
{% block content %}

<section id="showcase-inner" class="py-5 text-white">
    <div class="container">
    <div class="row text-center">
        <div class="col-md-12">
        <h1 class="display-4">{{listing.title | title}}</h1>
        <p class="lead"><i class="fas fa-map-marker"></i> {{listing.district | title}}</p>
        </div>
    </div>
    </div>
</section>

<!-- Breadcrumb -->
<section id="bc" class="mt-3">
    <div class="container">
    <nav>
        <ol class="breadcrumb">
        <li class="breadcrumb-item">
            <a href= {% url "pages:index" %}>Home</a>
        </li>
        <li class="breadcrumb-item">
            <a href= {% url "listings:index" %}>Listings</a>
        </li>
        <li class="breadcrumb-item active">{{listing.title | title}}</li>
        </ol>
    </nav>
    </div>
</section>

{% include 'partials/_alert.html' %}
<!-- Listing -->
<section id="listing" class="py-4">
    <div class="container">
    <a href={% url "listings:index" %} class="btn btn-light mb-4">Back To Listings</a>
        <div class="row">
            <div class="col-md-9">
            <!-- Home Main Image -->
            <img
                src="{{listing.photo_main.url}}"
                alt=""
                class="img-main img-fluid mb-3"
            />
            <!-- Thumbnails -->
            <div class="row mb-5 thumbs">
                <div class="col-md-2">
                <a
                    href="{{listing.photo_main.url }}"
                    data-lightbox="home-images"
                >
                    <img
                    src="{{listing.photo_main.url }}"
                    alt=""
                    class="img-fluid"
                    />
                </a>
                </div>
                <div class="col-md-2">
                {% if listing.photo_2 %}
                <a
                    href= "{{listing.photo_2.url }}"
                    data-lightbox="home-images"
                >
                    <img
                    src= "{{listing.photo_2.url }}"
                    alt=""
                    class="img-fluid"
                    />
                </a>
                {% endif %}
                </div>
                
            </div>
            <!-- Fields -->
            <div class="row mb-5 fields">
                <div class="col-md-6">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item text-secondary">
                    <i class="fas fa-money-bill-alt"></i> Clinic Inpatient Fee
                    Estimate:
                    <span class="float-right">$20,000/Day</span>
                    </li>
                    <li class="list-group-item text-secondary">
                    <i class="fas fa-bed"></i> Rooms:
                    <span class="float-right">{{listing.rooms}}</span>
                    </li>
                    <li class="list-group-item text-secondary">
                    <i class="fas fa-bath"></i> Service:
                    <span class="float-right">12345</span>
                    </li>
                    <li class="list-group-item text-secondary">
                    <i class="fas fa-dumbbell"></i> Treatment:
                    <span class="float-right"> Have </span>
                    </li>
                </ul>
                </div>
                <div class="col-md-6">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item text-secondary">
                    <i class="fas fa-th-large"></i> Restrooms:
                    <span class="float-right">Have</span>
                    </li>
                    <li class="list-group-item text-secondary">
                    <i class="fas fa-square"></i> Specialized Care:
                    <span class="float-right">No</span>
                    </li>
                    <li class="list-group-item text-secondary">
                    <i class="fas fa-calendar"></i> Preventative Services:
                    <span class="float-right">Have</span>
                    </li>
                    <li class="list-group-item text-secondary">
                    <i class="fas fa-bed"></i> Minor Surgical Procedures:
                    <span class="float-right">No</span>
                    </li>
                </ul>
                </div>
            </div>

            <!--professional-->
            <div class="row mb-5">
                <h4 class="mr-3 text-secondary">Professions:</h4>
                {% if listing.professions.all %}
                
                    {% for profession in listing.professions.all %}
                    <ul>
                    <li class="row mr-3">{{profession.name}}</li>
                    </ul>
                    {% endfor %}
                
                {% else %}
                <p class="text-secondary">No professions Listed</p>
                {% endif %}
            </div>

            <!--services-->
            <div class="row mb-5">
                <h4 class="mr-3 text-secondary">Services:</h4>
                {% if listing.services.all %}
                <ul>
                    {% for service_tag in listing.services.all %}
                    <li class="mr-3">{{service_tag.name | title}}</li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="text-secondary">No services</p>
                {% endif %}
            </div>

            <!-- Description -->
            <div class="row mb-5">
                <div class="col-md-12">
                {{listing.description | linebreaks}}
                </div>
            </div>
            </div>
            <div class="col-md-3">
            <div class="card mb-3">
                <img
                class="card-img-top"
                src="{{listing.doctor.photo.url}}"
                alt="Doctor of the month"
                />
                <div class="card-body">
                <h5 class="card-title">Medical Practitioner</h5>
                <h6 class="text-secondary">{{listing.doctor.name}}</h6>
                </div>
            </div>
            <button
                class="btn-primary btn-block btn-lg"
                data-toggle="modal"
                data-target="#inquiryModal"
            >
                Make An Inquiry
            </button>
            </div>
        </div>
    </div>
</section>

<!-- Inquiry Modal -->
<div class="modal fade" id="inquiryModal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="inquiryModalLabel">Make An Inquiry</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form method = "POST" action = "{% url "contacts:contact" %}">
                    {% csrf_token %}
                    <input type="hidden" name="listing_id" value="{{listing.id}}"/>
                    <input type="hidden" name="doctor_email" value="{{listing.doctor.email}}"/>
                    
                    {% if user.is_authenticated %}
                    <input type="hidden" name="user_id" value="{{user.id}}"/>
                    {% else %}
                    <input type="hidden" name="user_id" value="0"/>
                    {% endif %}

                    <div class="form-group">
                        <label for="listing" class="col-form-label">Clinic:</label>
                        <input
                            type="text"
                            name="listing"
                            class="form-control"
                            value="{{listing.title | title}}"
                            readonly 
                            {% comment %} disable (would not submit) readonly (submit) {% endcomment %}
                        />
                    </div>
                    <!--Name -->
                    <div class="form-group">
                        <label for="name" class="col-form-label">Name:</label>
                        <input 
                            type="text" 
                            name="name" 
                            class="form-control" 
                            {% if user.is_authenticated %} 
                            value = "{{user.first_name}} {{user.last_name}}"
                            readonly
                            {% endif %}
                        />
                    </div>
                    <!--Email -->
                    <div class="form-group">
                        <label for="email" class="col-form-label">Email:</label>
                        <input
                            type="email"
                            name="email"
                            class="form-control"
                            {% if user.is_authenticated %} 
                            value = "{{user.email}}"
                            readonly
                            {% endif %}
                        />
                    </div>
                    <!--phone-->
                    <div class="form-group">
                        <label for="phone" class="col-form-label">Phone:</label>
                        <input 
                        type="text" 
                        name="phone" 
                        class="form-control" />
                    </div>
                    <!--message-->
                    <div class="form-group">
                        <label for="message" class="col-form-label">Message:</label>
                        <textarea name="message" class="form-control"></textarea>
                    </div>
                    <hr />
                    <input
                    type="submit"
                    value="Send"
                    class="btn btn-block btn-secondary"
                    />
                </form>
            </div>
        </div>
    </div>
</div>


{% endblock %}